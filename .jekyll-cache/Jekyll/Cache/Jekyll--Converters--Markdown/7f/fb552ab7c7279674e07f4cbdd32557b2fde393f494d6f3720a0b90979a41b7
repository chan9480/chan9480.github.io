I",<p class="notice--warning">인프런에 있는 황대희님의 <strong>언리얼 엔진4 3D 횡스크롤 게임 만들기</strong> 강의를 듣고 정리한 필기입니다. 😀<br />
<strong>언리얼 엔진 공식 문서</strong> <a href="https://docs.unrealengine.com/ko/index.html">https://docs.unrealengine.com/ko/index.html</a></p>

<h2 id="-보스의-hp-bar-ui-만들기">🚖 보스의 HP Bar UI 만들기</h2>

<p>보스에게 가까이 가면 플레이어처럼 우측 상단에 보스의 HP Bar 를 띄우도록 한다. Canvas Panel을 하나 더 추가해서 Canvas Panel 하나만 보이게 하면 보스의 UI 들이 나오게끔 구현할 것이다.</p>

<blockquote>
  <p>🚩 “GamePlayMain” 위젯 블루프린트(플레이어 Hp Bar 작업했었던) 디자이너 모드</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100494993-684c2280-318a-11eb-82c8-87e38100354d.png" alt="image" /></p>

<p>Boss 의 UI를 띄울 <code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code>라는 이름의  Canvas Panel을 기존의 Canvas Panel 자식으로 추가한다. 플레이어의 UI와 똑같이 만들어주고 적절히 배치하고 크기를 조절한다.</p>

<p><img src="https://user-images.githubusercontent.com/42318591/100495032-b95c1680-318a-11eb-882c-29891b1c00cc.png" alt="image" /></p>

<ul>
  <li>보스 UI 캔버스 패널은 보스에게 가까이 갔을 때만 띄울 것이다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code>
        <ul>
          <li>Visibliity 를 hidden 으로 바꾼다.
            <ul>
              <li>보스와 가까이 있지 않는 디폴트 상태에선 보스 UI 캔버스는 안보이게 할 것이다.</li>
            </ul>
          </li>
          <li>IsVisible(변수인지)를 체크하여 <strong>이 캔버스를 참조하는 레퍼런스 변수를 만들어준다.</strong>
            <ul>
              <li>다른 UI 요소들은 이게 디폴트로 체크가 되어 있는데 캔버스는 체크되어 있지 않다.</li>
              <li>이 변수를 통하여 이 캔버스를 보이게끔 켜줄 수 있다.</li>
              <li><code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code>를 참조하는 <code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code> 레퍼런스 변수가 생김.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-보스-hp-bar-ui-생성-및-띄우기">🚕 보스 HP Bar UI 생성 및 띄우기</h2>

<blockquote>
  <p>🚩 “SideScrollGameInstance” 게임 인스턴스 블루프린트</p>
</blockquote>

<p>보스의 UI 캔버스를 보이게 하기 위한 함수 <code class="language-plaintext highlighter-rouge">Show Boss UI</code>를 만든다. 이 함수의 파라미터는 boolean 타입의 <code class="language-plaintext highlighter-rouge">IsShow</code>이다.</p>

<p><img src="https://user-images.githubusercontent.com/42318591/100495097-823a3500-318b-11eb-81b7-93389eaf8e6c.png" alt="image" /></p>

<ul>
  <li>파라미터가 True면
    <ul>
      <li>“GamePlayMain” 위젯의 <code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code>를 Visible 보이게 한다.</li>
    </ul>
  </li>
  <li>파라미터가 False면
    <ul>
      <li>“GamePlayMain” 위젯의 <code class="language-plaintext highlighter-rouge">CanvasPanel_Boss</code>를 Hidden 보이지 않게 한다.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<blockquote>
  <p>🚩 보스 블루프린트 이벤트 그래프</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100495158-ed840700-318b-11eb-8b7d-1eb82276bf7f.png" alt="image" /></p>

<p>“SideScrollGameInstance” 게임 인스턴스 블루프린트의 <code class="language-plaintext highlighter-rouge">Show Boss UI</code> 함수를 호출하기 위하여 “SideScrollGameInstance” 게임 인스턴스 블루프린트 레퍼런스를 먼저 가져와야 한다.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">Get Game Instance</code>로 “SideScrollGameInstance” 게임 인스턴스 블루프린트로 생성된 오브젝트를 가져온다.
    <ul>
      <li>게임 인스턴스는 싱글톤으로 게임 내에 단 하나만 존재하기 때문에 이런 함수로 가져올 수 있는 것!</li>
    </ul>
  </li>
  <li>Object로 가져왔으므로 “SideScrollGameInstance”로 형변환한다.</li>
  <li><code class="language-plaintext highlighter-rouge">SideScrollGameInsRef</code> 변수를 만들어 이에 저장한다.</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/42318591/100495170-0391c780-318c-11eb-90c2-15bc42e1d19c.png" alt="image" /></p>

<p>보스와의 거리가 5미터 이하라면 보스 캔버스 UI를 띄우도록 하기 위하여 <code class="language-plaintext highlighter-rouge">SideScrollGameInsRef</code>로부터 <code class="language-plaintext highlighter-rouge">Show Boss UI</code> 함수를 호출한다. 파라미터 값은 True 여야 보스 UI가 보일 수 있으므로 <code class="language-plaintext highlighter-rouge">Is Show</code>는 체크해준다.</p>

<p><br /></p>

<h2 id="-보스의-이미지">🚕 보스의 이미지</h2>

<p>보스 이미지 <code class="language-plaintext highlighter-rouge">Image_BossPic</code>에 진짜 보스의 이미지를 설정해줄 것이다.</p>

<blockquote>
  <p>🚩 “GamePlayMain” 위젯 블루프린트 이벤트 그래프</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100496733-c0d6ec00-3199-11eb-9290-22b0928e4edd.png" alt="image" /></p>

<p><strong>UI 요소의 디테일 패널에서 볼 수 있는 사진 속 각각의 모듈들이 Slate 이다.</strong> 이미지 UI 요소엔 이렇게 <code class="language-plaintext highlighter-rouge">Brush</code>라는 <strong><u>Slate</u></strong> 가 있다. 이 <code class="language-plaintext highlighter-rouge">Brush</code> Slate의 <code class="language-plaintext highlighter-rouge">Image</code>에서 이미지 파일을 설정할 수 있기 때문에 따로 <code class="language-plaintext highlighter-rouge">Brush</code> Slate 를 만들어서 이 <code class="language-plaintext highlighter-rouge">Image_BossPic</code>의 Slate로 적용시켜줄 것이다~!</p>

<p><img src="https://user-images.githubusercontent.com/42318591/100496412-4016f080-3197-11eb-9b24-5cc1a8afeeb1.png" alt="image" /></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Change Boss Image</code>라는 함수를 만든다. 이 함수는 <em>Texture 2D</em> 타입의 <code class="language-plaintext highlighter-rouge">Boss Texture</code> 매개 변수를 가지도록 설정해주었다.
    <ul>
      <li><em>Texture 2D</em> 타입 변수는 이미지 파일 (.png)를 참조한다.</li>
      <li>우선 <strong><u>Brush Slate</u></strong>를 만든다. <strong><em>(Make SlateBrush)</em></strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Image</code>에 파라미터로 들어온 <code class="language-plaintext highlighter-rouge">Boss Texture</code> 매개 변수값을 연결해준다.</li>
        </ul>
      </li>
      <li>방금 만든 이 Brush Slate를 보스 이미지 <code class="language-plaintext highlighter-rouge">Image_BossPic</code>의 Brush Slate로 세팅해준다.<strong><em>(Set Brush)</em></strong></li>
    </ul>
  </li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Change Boss Image</code>라는 함수가 실행되면 파라미터로 받은 이미지 파일을 <code class="language-plaintext highlighter-rouge">Image_BossPic</code> 이미지 UI 요소의 Brush 슬레이트의 Image에 설정한다.</p>

<p><br /></p>

<blockquote>
  <p>🚩 “SideScrollGameInstance” 게임 인스턴스 블루프린트</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100496450-7c4a5100-3197-11eb-99ba-1a1803472720.png" alt="image" /></p>

<p><code class="language-plaintext highlighter-rouge">Show Boss UI</code> 함수의 매개 변수를 하나 더 추가해주었다. 이 함수로 이미지 파일 또한 입력을 받을 것이다. 이미지 파일을 받을 수 있는 <em>Texture 2D</em> 타입인 <code class="language-plaintext highlighter-rouge">Boss Texture</code>이라는 매개 변수를 추가해주었다. 보스 UI 를 띄워야 할 때면 “GamePlayMain”의 <code class="language-plaintext highlighter-rouge">Change Boss Image</code>도 실행시켜 보스의 이미지 UI 요소인 <code class="language-plaintext highlighter-rouge">Image_BossPic</code>의 이미지 파일을 입력 받은 <code class="language-plaintext highlighter-rouge">Boss Texture</code>로 설정한다.</p>

<p><br /></p>

<blockquote>
  <p>🚩 보스 블루프린트 이벤트 그래프</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100496461-97b55c00-3197-11eb-8fac-685b3caf2c7b.png" alt="image" /></p>

<p>보스랑 거리 5미터 이내시 <code class="language-plaintext highlighter-rouge">Show Boss UI</code> 함수 호출할 때</p>

<ul>
  <li><em>Texture 2D</em> 타입인 <code class="language-plaintext highlighter-rouge">Boss Texture</code>라는 변수를 만들고 기본 값으로 보스의 얼굴 이미지 파일(bosspic.png)을 설정해준다.</li>
  <li>
    <p>이 변수 값을 보스랑 거리 5미터 이내시 <code class="language-plaintext highlighter-rouge">Show Boss UI</code> 함수 호출할 때 파라미터로 넘겨준다.</p>
  </li>
  <li>보스와 500 미터 이내일시
    <ul>
      <li>👉 “SideScrollGameInstance”의 <code class="language-plaintext highlighter-rouge">ShowBossUI</code> 함수 실행
        <ul>
          <li>👉 보스 캔버스 보이게하기 및 “GamePlayMain”의 <code class="language-plaintext highlighter-rouge">ChangeBossImage</code> 함수 실행</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-hp-를-hp-bar-ui-에-적용시키기">🚕 HP 를 HP Bar UI 에 적용시키기</h2>

<blockquote>
  <p>🚩 “GamePlayMain” 위젯 블루프린트 이벤트 그래프</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100497533-70fb2380-319f-11eb-926d-091c6ad93be1.png" alt="image" /></p>

<p>보스의 HP Bar 값 설정하는 <code class="language-plaintext highlighter-rouge">Update Boss HPBar</code> 함수 생성.</p>

<p><br /></p>

<blockquote>
  <p>🚩 보스 블루프린트 이벤트 그래프</p>
</blockquote>

<p><img src="https://user-images.githubusercontent.com/42318591/100497524-62ad0780-319f-11eb-80a8-28c01b9c7f66.png" alt="image" /></p>

<p>보스도 데미지를 입을 때 마다(Any Damage) “GamePlayMain”의 <code class="language-plaintext highlighter-rouge">Update Boss HPBar</code> 함수를 호출하여 HP Bar를 갱신한다.</p>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌜 개인 공부 기록용 블로그입니다. 오류나 틀린 부분이 있을 경우 
언제든지 댓글 혹은 메일로 지적해주시면 감사하겠습니다! 😄
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">맨 위로 이동하기</a></p>
:ET