I"Å<p class="notice--warning">ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ <strong>í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€</strong> ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ˜€ <br />
<a href="https://github.com/jmhong-simulation/GameDevPracticePackage">ğŸŒœ ê³µë¶€ì— ì‚¬ìš©ëœ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ì½”ë“œë“¤ ë³´ëŸ¬ê°€ê¸°</a> <br />
<a href="https://www.inflearn.com/course/c-2">ğŸŒœ [í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€] ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!</a></p>

<p><br /></p>

<h1 id="chapter-3-ê²Œì„-ë¬¼ë¦¬-ë§›ë³´ê¸°--íŒŒí‹°í´-ì‹œìŠ¤í…œ">Chapter 3. ê²Œì„ ë¬¼ë¦¬ ë§›ë³´ê¸° : íŒŒí‹°í´ ì‹œìŠ¤í…œ</h1>

<p><img src="https://user-images.githubusercontent.com/42318591/85256113-89536d80-b49e-11ea-8f33-4d2ddcbe72d4.png" alt="image" width="30%" height="30%" class="align-center" /></p>

<h2 id="-particleh">ğŸ“œ Particle.h</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "Game2D.h"
#include "Examples/PrimitivesGallery.h"
#include "RandomNumberGenerator.h"
#include "RigidCircle.h"
#include &lt;vector&gt;
#include &lt;memory&gt;
</span>
<span class="k">namespace</span> <span class="n">jm</span>
<span class="p">{</span>
	<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

	<span class="k">static</span> <span class="k">const</span> <span class="k">auto</span> <span class="n">gravity</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="n">f</span><span class="p">);</span>

	<span class="k">class</span> <span class="nc">Particle</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">vec2</span> <span class="n">pos</span><span class="p">;</span>
		<span class="n">vec2</span> <span class="n">vel</span><span class="p">;</span>
		<span class="n">RGB</span>  <span class="n">color</span><span class="p">;</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="k">auto</span> <span class="n">acc</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">;</span> <span class="c1">//assumes GA only.</span>

			<span class="n">vel</span> <span class="o">+=</span> <span class="n">acc</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
			<span class="n">pos</span> <span class="o">+=</span> <span class="n">vel</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>

			<span class="c1">// update age.</span>
			<span class="c1">// update color (blend with background color)</span>
		<span class="p">}</span>
	<span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Particle</code>
    <ul>
      <li><u>íŒŒí‹°í´ 1ê°œ ì…ì</u>
        <ul>
          <li>pos ìœ„ì¹˜</li>
          <li>vel ì†ë„</li>
          <li>color ìƒ‰ìƒ</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>const auto acc = gravity;</em>
    <ul>
      <li>íŒŒí‹°í´ ì…ìì˜ ê°€ì†ë„ì— ì˜í–¥ ë¯¸ì¹˜ëŠ”ê±´ ì¤‘ë ¥ë¿ì´ë¼ê³  ê°€ì •.</li>
    </ul>
  </li>
  <li><em>void update(const float &amp; dt)</em>
    <ul>
      <li>íŒŒí‹°í´ ì…ì 1ê°œì˜ ì†ë„ì™€ ìœ„ì¹˜ ì—…ë°ì´íŠ¸</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="particlesystemh">ğŸ“œParticleSystem.h</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">class</span> <span class="nc">ParticleSystem</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="n">Particle</span><span class="o">&gt;</span> <span class="n">particles</span><span class="p">;</span>

		<span class="n">RandomNumberGenerator</span> <span class="n">rn</span><span class="p">;</span>

		<span class="n">ParticleSystem</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">reset</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="k">auto</span> <span class="n">getRandomUnitVector</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="kt">float</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">3.141592</span><span class="n">f</span> <span class="o">*</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span> <span class="c1">// 0.0 ~ 2pi</span>

			<span class="k">return</span> <span class="n">vec2</span><span class="p">{</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)};</span>
		<span class="p">}</span>

		<span class="k">auto</span> <span class="n">getRandomColor</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="n">RGB</span><span class="p">{</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">),</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">),</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">)</span> <span class="p">};</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">reset</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">particles</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

			<span class="c1">// initialize particles</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">Particle</span> <span class="n">new_particle</span><span class="p">;</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.5</span><span class="n">f</span><span class="p">)</span> <span class="o">+</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.001</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.03</span><span class="n">f</span><span class="p">);</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.01</span><span class="n">f</span><span class="p">,</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">getRandomColor</span><span class="p">();</span>

				<span class="n">particles</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_particle</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">pt</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>

				<span class="c1">// remove particles when they are 1. too old, 2. out of screen.</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">draw</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">beginTransformation</span><span class="p">();</span>

			<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">drawPoint</span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">,</span> <span class="n">pt</span><span class="p">.</span><span class="n">pos</span><span class="p">,</span> <span class="mf">3.0</span><span class="n">f</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="n">endTransformation</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">};</span>
<span class="err">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ParticleSystem</code>
    <ul>
      <li><u>ì—¬ëŸ¬ íŒŒí‹°í´ ì…ìë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ</u></li>
      <li><em>vector&lt;Particle&gt; particles</em>
        <ul>
          <li>íŒŒí‹°í´ ì…ì ê°ì²´ë“¤ì´ ë²¡í„°ì— ë“¤ì–´ìˆë‹¤.
            <ul>
              <li>íŒŒí‹°í´ ê°ì²´ë¥¼ êµ³ì´ ì‚­ì œí•  ì¼ì´ ì—†ë‹¤ë©´ ì´ë ‡ê²Œ ê·¸ëƒ¥ ê°ì²´ ë³€ìˆ˜ë¡œ ë„£ì</li>
              <li>íŒŒí‹°í´ ê°ì²´ë¥¼ ì‚­ì œí•  ì¼ì´ ìˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">Particle*</code> í¬ì¸í„° íƒ€ì… ë²¡í„°ë¡œ ë§Œë“¤ì–´ íŒŒí‹°í´ ì…ìë“¤ ë™ì í• ë‹¹ ë°›ì•„ ë„£ì–´ ì£¼ê¸°</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>RandomNumberGenerator rn</em>
    <ul>
      <li>íŒŒí‹°í´ì€ ëœë¤í•œ ìœ„ì¹˜ + ëœë¤í•œ ë°©í–¥ìœ¼ë¡œ ì›€ì§ì´ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ½ê¸° ë•Œë¬¸ì— ëœë¤ ë„˜ë²„ ìƒì„± í´ë˜ìŠ¤ì˜ í•¨ìˆ˜ë“¤ ì‚¬ìš©í•  ê²ƒ</li>
    </ul>
  </li>
  <li><em>auto getRandomUnitVector()</em>
    <ul>
      <li>0ë„ ~ 2Ï€ë„ ì‚¬ì´ì—ì„œ ëœë¤í•œ ê°ë„ thetaë¥¼ ë¦¬í„´</li>
      <li><u>ê¸¸ì´ê°€ 1</u>ì¸ ëœë¤í•œ ë²¡í„°Vec2, ì¦‰ <code class="language-plaintext highlighter-rouge">ë‹¨ìœ„ë²¡í„°</code>ë¥¼ ë¦¬í„´í•œë‹¤.
        <ul>
          <li>ê¸¸ì´ê°€ 1ì¼ ë•Œì˜ x, y ì¢Œí‘œ
            <ul>
              <li><img src="https://user-images.githubusercontent.com/42318591/85262087-38487700-b4a8-11ea-92fd-436f8b2f3077.png" alt="image" width="30%" height="30%" class="align-center" /></li>
              <li>x ì¢Œí‘œ : cos(theta)</li>
              <li>y ì¢Œí‘œ : -sin(theta)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ëœë¤í•œ ë°©í–¥ì„ ë‚˜íƒ€ë‚´ëŠ” ë‹¨ìœ„ë²¡í„°</li>
    </ul>
  </li>
  <li><em>auto getRandomColor()</em>
    <ul>
      <li>ëœë¤í•œ ìƒ‰ìƒ ë¦¬í„´</li>
    </ul>
  </li>
  <li><em>void reset()</em>
    <ul>
      <li><em>particles.clear();</em> : ê¸°ì¡´ ë²¡í„°ì— ë“  íŒŒí‹°í´ ì…ì ì›ì†Œë“¤ì„ ì‹¹ ì§€ìš´ë‹¤.</li>
      <li>íŒŒí‹°í´ ì´ˆê¸°í™”
        <ul>
          <li><em>Particle new_particle</em> : íŒŒí‹°í´ ì…ì ê°ì²´ 1ê°œ ë§Œë“¤ê¸°
            <ul>
              <li>new_particle.pos = vec2(0.0f, 0.5f) + getRandomUnitVector() * rn.getFloat(0.001f, 0.03f);
                <ul>
                  <li><em>vec2(0.0f, 0.5f)</em>
                    <ul>
                      <li>íŒŒí‹°í´ì˜ ì´ˆê¸° ìœ„ì¹˜ëŠ” ì—¬ê¸°.</li>
                    </ul>
                  </li>
                  <li><em>getRandomUnitVector() * rn.getFloat(0.001f, 0.03f)</em>
                    <ul>
                      <li>ë‹¨ìœ„ë²¡í„° * ëœë¤í•œ float ìŠ¤ì¹¼ë¼ê°’ (0.001f~ 0.03f ì‚¬ì´ì˜)</li>
                      <li><code class="language-plaintext highlighter-rouge">ëœë¤í•œ ë°©í–¥</code>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ëœë¤í•œ ê¸¸ì´</code>ë¡œ <u>ê¸°ë³¸ ìœ„ì¹˜</u>ë¡œë¶€í„° ë”í•´ì§</li>
                    </ul>
                  </li>
                  <li>ì¦‰ basic ìœ„ì¹˜ vec2(0.0f, 0.5f) ë¡œë¶€í„° ëœë¤í•œ ë²¡í„°ê°€ ë”í•´ì ¸ ê° íŒŒí‹°í´ë§ˆë‹¤ ì´ˆê¸° ìƒì„± ìœ„ì¹˜ê°€ ë‹¤ë¥´ê²Œ ëœë‹¤.</li>
                </ul>
              </li>
              <li><em>new_particle.vel</em>
                <ul>
                  <li><em>getRandomUnitVector() * rn.getFloat(0.01f, 2.0f);</em>
                    <ul>
                      <li>ë‹¨ìœ„ë²¡í„° * ëœë¤í•œ float ìŠ¤ì¹¼ë¼ê°’ (0.001f~ 0.03f ì‚¬ì´ì˜)</li>
                      <li><code class="language-plaintext highlighter-rouge">ëœë¤í•œ ë°©í–¥</code>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ëœë¤í•œ ê¸¸ì´</code>ë¡œ <u>ì†ë„ê°’</u>ì´ ì„¤ì •ë¨.</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><em>new_particle.color</em>
                <ul>
                  <li><em>getRandomColor();</em>
                    <ul>
                      <li>ëœë¤í•œ ìƒ‰ìƒ</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><em>particles.push_back(new_particle);</em>
                <ul>
                  <li>ì´ë ‡ê²Œ ìƒì„±ìœ„ì¹˜ (pos), ì†ë„(vel), ìƒ‰ìƒ(color) ë©¤ë²„ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì¤€ í›„ <u>ë²¡í„°ì— ë„£ê¸°</u></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>void update(const float &amp; dt)</em>
    <ul>
      <li>íŒŒí‹°í´ ë²¡í„°ë“¤ì˜ ëª¨ë“  ì›ì†Œì— ì‹œê°„ dtë¥¼ ë„˜ê²¨ ì†ë„ì™€ ìœ„ì¹˜ë¥¼ ì—…ëƒí•œë‹¤</li>
      <li>pt.update(dt);
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Particle</code> ì˜ í•¨ìˆ˜ updateë¥¼ ì†Œí™˜í•¨</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>void draw()</em>
    <ul>
      <li>ë²¡í„° ì•ˆì— ë“  íŒŒí‹°í´ ì…ìë“¤ì„ í•˜ë‚˜í•˜ë‚˜ ê·¸ë ¤ì¤€ë‹¤.</li>
      <li>âœ¨ draw() í•¨ìˆ˜ë¥¼ <code class="language-plaintext highlighter-rouge">Particle</code> í´ë˜ìŠ¤ê°€ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">ParticleSystem</code> í´ë˜ìŠ¤ì— êµ¬í˜„í•œ ì´ìœ 
        <ul>
          <li>Particle í´ë˜ìŠ¤ ì•ˆì— ì •ì˜í•´ë„ ë˜ì§€ë§Œ ê·¸ë ‡ê²Œ ë˜ë©´ í˜¸ì¶œí•  ë•Œ íŒŒí‹°í´ ì…ì í•˜ë‚˜ ê·¸ë¦´ ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ 1000ë²ˆ í˜¸ì¶œí•´ì•¼ í•˜ë¯€ë¡œ ì„±ëŠ¥ë©´ì—ì„œ ë„ˆë¬´ ì•ˆì¢‹ë‹¤.</li>
          <li>ê·¸ëƒ¥ íŒŒí‹°í´ 1000ê°œë¥¼ ê´€ë¦¬í•˜ëŠ” ParticleSystem í´ë˜ìŠ¤ ì•ˆì— êµ¬í˜„í•˜ë©´ draw() í•¨ìˆ˜ë¥¼ ë”± í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì²œê°œë¥¼ ë‹¤ ê·¸ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ.. forë¬¸ìœ¼ë¡œ ë²¡í„°ì˜ ëª¨ë“  íŒŒí‹°í´ì„ ë‹¤ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ë¥¼ ParticleSystem ì•ˆì— ì •ì˜í•¨.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="-main">ğŸ“œ main</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Example</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Game2D</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">ParticleSystem</span> <span class="n">ps</span><span class="p">;</span>

		<span class="n">Example</span><span class="p">()</span>
			<span class="o">:</span> <span class="n">Game2D</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">reset</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">reset</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">ps</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">()</span> <span class="k">override</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="kt">float</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">getTimeStep</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.4</span><span class="n">f</span><span class="p">;</span>

			<span class="n">ps</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>

			<span class="n">ps</span><span class="p">.</span><span class="n">draw</span><span class="p">();</span>

			<span class="c1">// reset button</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">isKeyPressedAndReleased</span><span class="p">(</span><span class="n">GLFW_KEY_R</span><span class="p">))</span> <span class="n">reset</span><span class="p">();</span>
		<span class="p">}</span>

	<span class="p">};</span>
<span class="err">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">jm</span><span class="o">::</span><span class="n">Example</span><span class="p">().</span><span class="n">run</span><span class="p">();</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ParticleSystem ps
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ParticleSystem</code> íŒŒí‹°í´ ì‹œìŠ¤í…œ ê°ì²´ë§Œ ìƒì„±ë©´ ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-íŒŒí‹°í´ì—-ìˆ˜ëª…ì„-ë„£ì–´ë³´ì">ğŸ”” íŒŒí‹°í´ì— ìˆ˜ëª…ì„ ë„£ì–´ë³´ì.</h2>

<ul>
  <li>ê° <code class="language-plaintext highlighter-rouge">Particle</code> ì…ì ê°ì²´ë§ˆë‹¤ ìˆ˜ëª…ì´ ë‹¤í•˜ë©´ ì‚¬ë¼ì§€ë„ë¡</li>
  <li>ê° <code class="language-plaintext highlighter-rouge">Particle</code> ì…ì ê°ì²´ë§ˆë‹¤ ìˆ˜ëª…ì´ ë‹¤ë¥´ë„ë¡</li>
</ul>

<h3 id="particleh">ğŸ“œParticle.h</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "Game2D.h"
#include "Examples/PrimitivesGallery.h"
#include "RandomNumberGenerator.h"
#include "RigidCircle.h"
#include &lt;vector&gt;
#include &lt;memory&gt;
</span>
<span class="k">namespace</span> <span class="n">jm</span>
<span class="p">{</span>
	<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

	<span class="k">static</span> <span class="k">const</span> <span class="k">auto</span> <span class="n">gravity</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="n">f</span><span class="p">);</span>

	<span class="k">class</span> <span class="nc">Particle</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">vec2</span> <span class="n">pos</span><span class="p">;</span>
		<span class="n">vec2</span> <span class="n">vel</span><span class="p">;</span>
		<span class="n">RGB</span>  <span class="n">color</span><span class="p">;</span>

		<span class="kt">float</span> <span class="n">age</span><span class="p">;</span>
		<span class="kt">float</span> <span class="n">life</span><span class="p">;</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="k">auto</span> <span class="n">acc</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">;</span> <span class="c1">//assumes GA only.</span>

			<span class="n">vel</span> <span class="o">+=</span> <span class="n">acc</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
			<span class="n">pos</span> <span class="o">+=</span> <span class="n">vel</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>

			<span class="c1">// update age</span>
			<span class="n">age</span> <span class="o">+=</span> <span class="n">dt</span><span class="p">;</span>

			<span class="c1">// update age.</span>
			<span class="c1">// update color (blend with background color)</span>
		<span class="p">}</span>
	<span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong><em>class Particle</em></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">age</code>ì™€ <code class="language-plaintext highlighter-rouge">life</code>ë¥¼ ì¶”ê°€í–ˆë‹¤.</li>
      <li><em>float age</em>
        <ul>
          <li>í˜„ì¬ ë‚˜ì´ ì €ì¥</li>
          <li>ë‹¨ìœ„ëŠ” ì‹œê°„</li>
        </ul>
      </li>
      <li><em>float life</em>
        <ul>
          <li>ìˆ˜ëª… ì €ì¥</li>
          <li>ë‹¨ìœ„ëŠ” ì‹œê°„</li>
        </ul>
      </li>
      <li><em>void update(const float &amp; dt)</em>
        <ul>
          <li>age += dt;
            <ul>
              <li><u>ë‚˜ì´ ì—…ë°ì´íŠ¸</u></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="particlesystemh-1">ğŸ“œParticleSystem.h</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">class</span> <span class="nc">ParticleSystem</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="n">Particle</span><span class="o">&gt;</span> <span class="n">particles</span><span class="p">;</span>

		<span class="n">RandomNumberGenerator</span> <span class="n">rn</span><span class="p">;</span>

		<span class="n">ParticleSystem</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">reset</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="k">auto</span> <span class="n">getRandomUnitVector</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="kt">float</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">3.141592</span><span class="n">f</span> <span class="o">*</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span> <span class="c1">// 0.0 ~ 2pi</span>

			<span class="k">return</span> <span class="n">vec2</span><span class="p">{</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)};</span>
		<span class="p">}</span>

		<span class="k">auto</span> <span class="n">getRandomColor</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="n">RGB</span><span class="p">{</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">),</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">),</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">)</span> <span class="p">};</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">reset</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">particles</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

			<span class="c1">// initialize particles</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">Particle</span> <span class="n">new_particle</span><span class="p">;</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.5</span><span class="n">f</span><span class="p">)</span> <span class="o">+</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.001</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.03</span><span class="n">f</span><span class="p">);</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.01</span><span class="n">f</span><span class="p">,</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">getRandomColor</span><span class="p">();</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>
				<span class="n">new_particle</span><span class="p">.</span><span class="n">life</span> <span class="o">=</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.1</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>

				<span class="n">particles</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_particle</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">pt</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>

				<span class="c1">// remove particles when they are 1. too old, 2. out of screen.</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="kt">void</span> <span class="n">draw</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">beginTransformation</span><span class="p">();</span>

			<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">pt</span><span class="p">.</span><span class="n">life</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
				<span class="n">drawPoint</span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">,</span> <span class="n">pt</span><span class="p">.</span><span class="n">pos</span><span class="p">,</span> <span class="mf">3.0</span><span class="n">f</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="n">endTransformation</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">};</span>
<span class="err">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ParticleSystem</code>
    <ul>
      <li><em>void reset()</em>
        <ul>
          <li><em>new_particle.age = 0.0f;</em>
            <ul>
              <li>íŒŒí‹°í´ì˜ í˜„ì¬ ë‚˜ì´ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”</li>
            </ul>
          </li>
          <li><em>new_particle.life = rn.getFloat(0.1f,1.0f);</em>
            <ul>
              <li>íŒŒí‹°í´ì˜ ìˆ˜ëª…ì€ 0.1ì´ˆ~1ì´ˆ ì¤‘ ëœë¤í•˜ê²Œ</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><em>void draw()</em>
        <ul>
          <li><u>ë‚˜ì´ê°€ ìˆ˜ëª…ì— ë‹¤ë‹¤ë¥´ë©´ íŒŒí‹°í´ ì…ìë¥¼ ê·¸ë§Œ ê·¸ë¦¬ë„ë¡.</u>
            <ul>
              <li><em>if (pt.age &gt; pt.life) continue;</em>
                <ul>
                  <li>ë‚˜ì´ê°€ ìˆ˜ëª…ì„ ë„˜ì–´ë²„ë¦° <code class="language-plaintext highlighter-rouge">Particle</code>ì€ ê·¸ë¦¬ì§€ ì•Šê³  ê·¸ëƒ¥ continue í•´ë²„ë¦¼</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-fade-out-íš¨ê³¼-ë¸”ë Œë”©-íš¨ê³¼-ì£¼ê¸°">ğŸ”” Fade out íš¨ê³¼, ë¸”ë Œë”© íš¨ê³¼ ì£¼ê¸°</h2>

<h3 id="particlesystemh-ì˜-drawí•¨ìˆ˜">ğŸ“œParticleSystem.h ì˜ draw()í•¨ìˆ˜</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">pt</span><span class="p">.</span><span class="n">life</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

		<span class="k">const</span> <span class="kt">float</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">pt</span><span class="p">.</span><span class="n">age</span> <span class="o">/</span> <span class="n">pt</span><span class="p">.</span><span class="n">life</span><span class="p">;</span>
		<span class="k">const</span> <span class="n">RGB</span> <span class="n">blended_color</span> <span class="o">=</span> <span class="p">{</span>
			<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">),</span>
			<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">g</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">),</span>
			<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="p">};</span>

		<span class="n">beginTransformation</span><span class="p">();</span>
		<span class="n">translate</span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
		<span class="n">drawFilledStar</span><span class="p">(</span><span class="n">blended_color</span><span class="p">,</span> <span class="mf">0.03</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.01</span><span class="n">f</span><span class="p">);</span>
		<span class="n">endTransformation</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>ë°°ê²½(í°ìƒ‰)ê³¼ íŒŒí‹°í´ ì…ìì˜ ìƒ‰ìƒì´ ë¹„ìŠ·í•´ì§€ë„ë¡ ì ì  ë¸”ë Œë”©</li>
  <li>ë‚˜ì´ê°€ ìˆ˜ëª…ì— ë‹¤ë‹¤ë¥¼ìˆ˜ë¡ ì ì  í¬ë¯¸í•˜ê²Œ ê·¸ë ¤ì§€ë„ë¡
    <ul>
      <li>íŒŒí‹°í´ ì…ìê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ë¼ì§€ê¸° ìœ„í•´</li>
      <li><em>void draw()</em>
        <ul>
          <li><em>const float <code class="language-plaintext highlighter-rouge">alpha</code> = 1.0f - pt.age / pt.life;</em></li>
        </ul>
      </li>
    </ul>
    <ul>
      <li>ë‚¨ì€ ìˆ˜ëª…ì´ ì–¼ë§ˆë‚˜ ë˜ëŠ”ì§€ë¥¼ 0~1 ì‚¬ì´ì˜ ìˆ«ìë¡œ í‘œí˜„í•œë‹¤.</li>
      <li>ê°“ ë§Œë“¤ì–´ì§„ age=0 ì˜ íŒŒí‹°í´ ì…ìë¼ë©´ alphaê°’ì€ 1ì´ ë  ê²ƒ.</li>
      <li>ë°˜ëŒ€ë¡œ ìˆ˜ëª…ì´ ë‹¤í–ˆë‹¤ë©´ alpha=0 ì´ ë  ê²ƒ. ìˆ˜ëª…ì— ë‹¤ë‹¤ë¥¼ìˆ˜ë¡ alpha ê°’ì€ 0ì— ê°€ê¹Œì›Œì§„ë‹¤.
      - *const RGB blended_color *</li>
      <li>í°ìƒ‰ì˜ RGBê°’ì€ (1, 1, 1) ì´ë‹¤.
        <ul>
          <li>ìˆ˜ëª…ì— ë‹¤ë‹¤ë¥¼ ìˆ˜ë¡ alphaëŠ” 0ì— ê°€ê¹Œì›Œì§€ë¯€ë¡œ ìˆ˜ëª…ì´ ë‹¤í•˜ë©´ ê¸°ì¡´ íŒŒí‹°í´ ìƒ‰ìƒì¸ pt.color.r,g,b ê°’ì€ 0ì´ ë˜ê°ˆ ê²ƒì´ê³  (1,1,1) ì— ê°€ê¹Œì›Œì§ˆ ê²ƒ.</li>
        </ul>
      </li>
      <li>ë³„ì„ ê·¸ë¦¬ë„ë¡ ë°”ê¿”ë³´ì•˜ë‹¤.</li>
    </ul>
  </li>
  <li>ê°ê°ì˜ íŒŒí‹°í´ ë³„ ê°ì²´ê°€ ëœë¤ ê°ë„ë¡œ íšŒì „í•˜ë©´ì„œ ë–¨ì–´ì§€ë„ë¡.</li>
</ol>

<p><br /></p>

<h2 id="-ë³„ì´-ëœë¤ìœ¼ë¡œ-íšŒì „í•˜ë„ë¡">ğŸ”” ë³„ì´ ëœë¤ìœ¼ë¡œ íšŒì „í•˜ë„ë¡</h2>

<p><img src="https://user-images.githubusercontent.com/42318591/85284611-7787bf80-b4ca-11ea-8652-028d59a1a12c.png" alt="image" width="30%" height="30%" class="align-center" /></p>

<h3 id="particleh-1">ğŸ“œParticle.h</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "Game2D.h"
#include "Examples/PrimitivesGallery.h"
#include "RandomNumberGenerator.h"
#include "RigidCircle.h"
#include &lt;vector&gt;
#include &lt;memory&gt;
</span>
<span class="k">namespace</span> <span class="n">jm</span>
<span class="p">{</span>
	<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

	<span class="k">static</span> <span class="k">const</span> <span class="k">auto</span> <span class="n">gravity</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="n">f</span><span class="p">);</span>

	<span class="k">class</span> <span class="nc">Particle</span>
	<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="n">vec2</span> <span class="n">pos</span><span class="p">;</span>
		<span class="n">vec2</span> <span class="n">vel</span><span class="p">;</span>
		<span class="n">RGB</span>  <span class="n">color</span><span class="p">;</span>

		<span class="kt">float</span> <span class="n">rot</span><span class="p">;</span>  <span class="c1">// ì¶”ê°€</span>
		<span class="kt">float</span> <span class="n">angular_velocity</span><span class="p">;</span> <span class="c1">//ì¶”ê°€</span>

		<span class="kt">float</span> <span class="n">age</span><span class="p">;</span>
		<span class="kt">float</span> <span class="n">life</span><span class="p">;</span>

		<span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="k">const</span> <span class="kt">float</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="k">auto</span> <span class="n">acc</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">;</span> <span class="c1">//assumes GA only.</span>

			<span class="n">vel</span> <span class="o">+=</span> <span class="n">acc</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
			<span class="n">pos</span> <span class="o">+=</span> <span class="n">vel</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>

			<span class="n">rot</span> <span class="o">+=</span> <span class="n">angular_velocity</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span> <span class="c1">// ì¶”ê°€</span>

			<span class="c1">// update age</span>
			<span class="n">age</span> <span class="o">+=</span> <span class="n">dt</span><span class="p">;</span>

			<span class="c1">// update age.</span>
			<span class="c1">// update color (blend with background color)</span>
		<span class="p">}</span>
	<span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><em>float rot;</em>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">íšŒì „ ê°ë„</code>
        <ul>
          <li>ìœ„ì¹˜ê°€ ì†ë„ì— ì˜í•´ ë°”ë€Œë“¯ì´</li>
          <li>íšŒì „ë„ ì†ë„ì— ì˜í•´ ë°”ë€Œë„ë¡.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>float angular_velocity;</em>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">íšŒì „ ì†ë„</code>
        <ul>
          <li><strong>rot - angular_velocity</strong> ê´€ê³„ëŠ” pos - vec ê´€ê³„ì™€ ë™ì¼
            <ul>
              <li>rotì— angular_velocityë¥¼ ë”í•´ rotì„ ê³„ì† ì—…ë°ì´íŠ¸</li>
            </ul>
          </li>
          <li><del>cf)angularê°€ì†ë„ë„ ìˆë‹¤. ë³¸ ê°•ì˜ì—ì„  ë‹¤ë£¨ì§€ ì•ŠìŒ</del></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>void update(const float &amp; dt)
    <ul>
      <li>rot += angular_velocity * dt;</li>
      <li>íšŒì „ê°ë„ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="particlesystemh-ì˜-reset-draw-í•¨ìˆ˜">ğŸ“œParticleSystem.h ì˜ <em>reset()</em>, <em>draw()</em> í•¨ìˆ˜</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">reset</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">particles</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

	<span class="c1">// initialize particles</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">Particle</span> <span class="n">new_particle</span><span class="p">;</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">vec2</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.5</span><span class="n">f</span><span class="p">)</span> <span class="o">+</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.001</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.03</span><span class="n">f</span><span class="p">);</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">getRandomUnitVector</span><span class="p">()</span> <span class="o">*</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.01</span><span class="n">f</span><span class="p">,</span> <span class="mf">2.0</span><span class="n">f</span><span class="p">);</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">getRandomColor</span><span class="p">();</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">life</span> <span class="o">=</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.1</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rn</span><span class="p">.</span><span class="n">getFloat</span><span class="p">(</span><span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">360.0</span><span class="n">f</span><span class="p">);</span>
		<span class="n">new_particle</span><span class="p">.</span><span class="n">angular_velocity</span> <span class="o">=</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">;</span>

		<span class="n">particles</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">new_particle</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span> <span class="n">pt</span> <span class="o">:</span> <span class="n">particles</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">pt</span><span class="p">.</span><span class="n">life</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

		<span class="k">const</span> <span class="kt">float</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">pt</span><span class="p">.</span><span class="n">age</span> <span class="o">/</span> <span class="n">pt</span><span class="p">.</span><span class="n">life</span><span class="p">;</span>
		<span class="k">const</span> <span class="n">RGB</span> <span class="n">blended_color</span> <span class="o">=</span> <span class="p">{</span>
					<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">),</span>
					<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">g</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">),</span>
					<span class="n">pt</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">+</span> <span class="mf">1.0</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="n">f</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="p">};</span>

		<span class="n">beginTransformation</span><span class="p">();</span>
		<span class="n">translate</span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
		<span class="n">rotate</span><span class="p">(</span><span class="n">pt</span><span class="p">.</span><span class="n">rot</span><span class="p">);</span>
		<span class="n">drawFilledStar</span><span class="p">(</span><span class="n">blended_color</span><span class="p">,</span> <span class="mf">0.03</span><span class="n">f</span><span class="p">,</span> <span class="mf">0.01</span><span class="n">f</span><span class="p">);</span>
		<span class="n">endTransformation</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><em>void reset()</em>
    <ul>
      <li>rotì˜ ì´ˆê¸°ê°’
        <ul>
          <li>0 ~ 360 ì¤‘ ëœë¤í•œ floatê°’</li>
        </ul>
      </li>
      <li>angular_velocity
        <ul>
          <li>rn.getFloat(-1.0f, 1.0f) * 360.0 * 4.0ff;
            <ul>
              <li>-1 ~ 1 ì‚¬ì´ì˜ ëœë¤í•œ ì‹¤ìˆ˜ ë½‘ê¸°
                <ul>
                  <li>ìŒìˆ˜ë©´ ë°˜ì‹œê³„ë°©í–¥, ì–‘ìˆ˜ë©´ ì‹œê³„ë°©í–¥</li>
                  <li>360ì„ ê³±í•´ ì†ë„ê° ì •í•˜ê¸°.</li>
                  <li>ëœë¤í•œ ìˆ˜ë¡œ 0.1fê°€ ë‚˜ì™”ë‹¤ë©´ 0.1 * 360 = 36. ì‹œê°„ë‹¹ 36ê°ë„ë¡œ ëŒ ê²ƒ.</li>
                  <li>4.0fëŠ” ê·¸ëƒ¥ ë” ë¹ ë¥´ê²Œ ëŒë¼ê³  ë§ë¶™ì„.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><em>void draw()</em>
    <ul>
      <li>rotate(pt.rot)</li>
    </ul>
  </li>
</ul>

<h3 id="cf-3ì°¨ì›ì—ì„œì˜-íšŒì „">cf. 3ì°¨ì›ì—ì„œì˜ íšŒì „</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ììœ ë„ ê°œë…</code>
    <ul>
      <li>í˜„ì¬ rotationì„ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜ê°€ rot 1ê°œ
        <ul>
          <li><code class="language-plaintext highlighter-rouge">1 ììœ ë„</code></li>
          <li>í•œ ë°©í–¥ìœ¼ë¡œë§Œ íšŒì „í•  ìˆ˜ ìˆìŒ
            <ul>
              <li>ì‹œê³„ë°©í–¥ or ë°˜ì‹œê³„ë°©í–¥(ì‹œê³„ë°©í–¥ì˜ ìŒìˆ˜)</li>
              <li>ë°˜ì‹œê³„ ë°©í–¥ íšŒì „ì€ ì‹œê³„ë°©í–¥ì˜ ìŒìˆ˜ ê°ë„ë§Œí¼ íšŒì „í•œê²ƒì´ë¼ê³  ë³´ê¸° ë•Œë¬¸ì— ë‘ ê²½ìš°ë¥¼ ëª¨ë‘ ê³ ë ¤í•´ë„ 1 ììœ ë„.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">2ì°¨ì›</code>ì—ì„  <code class="language-plaintext highlighter-rouge">1 ììœ ë„</code>, ì¦‰ íšŒì „ ë³€ìˆ˜ê°€ 1ê°œì—¬ë„ ê´œì°®ì§€ë§Œ <code class="language-plaintext highlighter-rouge">3ì°¨ì›</code>ì—ì„  2 ììœ ë„ê°€ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">3 ììœ ë„</code>ë¡œ ëŠ˜ì–´ë‚œë‹¤.
        <ul>
          <li>ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">2ì°¨ì›</code>ì¸ ì§€ê¸ˆì€ <code class="language-plaintext highlighter-rouge">float</code>ìœ¼ë¡œ íšŒì „ê°ê³¼ íšŒì „ì†ë„ë¥¼ í‘œí˜„í•˜ì§€ë§Œ</li>
          <li><code class="language-plaintext highlighter-rouge">3ì°¨ì›</code>ì—ì„  íšŒì „ê°ê³¼ íšŒì „ì†ë„ë¥¼ <code class="language-plaintext highlighter-rouge">ë²¡í„°ë¡œ í‘œì‹œ</code>í•´ì•¼ í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°</a></p>
:ET