I"¹ú<p class="notice--warning">ìµœí¥ë°°ë‹˜ì˜ ì±… <strong>Boost.Asioë¥¼ ì‚¬ìš©í•œ ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°</strong> ì„ ê³µë¶€í•˜ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€</p>

<h1 id="chapter-2-ë™ê¸°-io-ë°©ì‹ì˜-tcpip-echo-ì„œë²„-í´ë¼ì´ì–¸íŠ¸-í”„ë¡œê·¸ë¨-ë§Œë“¤ê¸°">Chapter 2. ë™ê¸° I/O ë°©ì‹ì˜ TCP/IP Echo ì„œë²„, í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸°</h1>

<blockquote>
  <p><strong>ë™ê¸° ë°©ì‹</strong> ğŸ‘‰ ìš”ì²­ í›„ ë‹µë³€ì„ ë°›ì„ ë•Œê¹Œì§€ ë” ì´ìƒ ì§„í–‰í•˜ì§€ ì•Šê³  ê¸°ë‹¤ë¦¬ëŠ” ë°©ì‹. ìš”ì²­í•œ ë‹µë³€ì„ ë°›ì•„ì•¼ë§Œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì§„í–‰í•œë‹¤.</p>
</blockquote>

<blockquote>
  <p>ì•„ë˜ ì½”ë“œë¥¼ ì´í•´í•œ í›„ ì™¸ìš¸ ê²ƒì„ ì¶”ì²œ!!!</p>
</blockquote>

<ul>
  <li>ì„œë²„, í´ë¼ì´ì–¸íŠ¸ ì•„ì˜ˆ ê°ê° ë³„ê°œì˜ í”„ë¡œì íŠ¸ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</li>
  <li>ì‹¤í–‰ì‹œ ì„œë²„ë¥¼ ë¨¼ì € ì‹¤í–‰í•´ì•¼ í•œë‹¤.
    <ul>
      <li>ì„œë²„ê°€ ë¨¼ì € ì‹¤í–‰ëœ í›„ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ê¸°ë‹¤ë¦°ë‹¤.</li>
    </ul>
  </li>
</ul>

<h2 id="-ì„œë²„">ğŸ”” ì„œë²„</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;boost/asio.hpp&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">char</span> <span class="n">SERVER_IP</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"127.0.0.1"</span><span class="p">;</span>  <span class="c1">// ì„œë²„ì—ì„  ì‚¬ì‹¤ í•„ìš” ì—†ë‹¤.</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PORT_NUMBER</span> <span class="o">=</span> <span class="mi">3100</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">io_service</span> <span class="n">io_service</span><span class="p">;</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="n">endpoint</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">v4</span><span class="p">(),</span> <span class="n">PORT_NUMBER</span><span class="p">);</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">acceptor</span> <span class="n">acceptor</span><span class="p">(</span><span class="n">io_service</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">);</span>

	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span> <span class="n">socket</span><span class="p">(</span><span class="n">io_service</span><span class="p">);</span>
	<span class="n">acceptor</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="n">socket</span><span class="p">);</span>
	
	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"í´ë¼ì´ì–¸íŠ¸ ì ‘ì†"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(;;)</span>
	<span class="p">{</span>
		<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">error</span><span class="p">;</span>
		<span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">read_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">eof</span><span class="p">)</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" error Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ì€ ë©”ì„¸ì§€: "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">szMessage</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="p">};</span>
		<span class="n">sprintf_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"Re:%s"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="kt">int</span> <span class="n">nMsgLen</span> <span class="o">=</span> <span class="n">strnlen_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">ignored_error</span><span class="p">;</span>
		<span class="n">socket</span><span class="p">.</span><span class="n">write_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="n">nMsgLen</span><span class="p">),</span> <span class="n">ignored_error</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">getchar</span><span class="p">();</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="1ï¸âƒ£-í´ë¼ì´ì–¸íŠ¸ì˜-ì ‘ì†ì„-ì¤€ë¹„í•˜ê¸°">1ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ì¤€ë¹„í•˜ê¸°</h3>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::asio::io_service</code> io_service;</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">io_service</code>
    <ul>
      <li><strong>Boost.Asioì˜ í•µì‹¬</strong>ìœ¼ë¡œ ì»¤ë„ì—ì„œ ë°œìƒí•œ I/O ì´ë²¤íŠ¸ë¥¼ <em>ë””ìŠ¤íŒ¨ì¹˜</em> í•´ì¤€ë‹¤.
        <ul>
          <li><em>ë””ìŠ¤ íŒ¨ì¹˜</em> ğŸ‘‰ ë©€í‹° íƒœìŠ¤í‚¹ í™˜ê²½ì—ì„œ ìš°ì„  ìˆœìœ„ê°€ ë†’ì€ ì‘ì—…ì´ ìˆ˜í–‰ë  ìˆ˜ ìˆë„ë¡ ìì›ì„ í• ë‹¹í•˜ëŠ” ê²ƒ</li>
        </ul>
      </li>
      <li>ë„¤íŠ¸ì›Œí¬ ìƒì˜ <u>ì ‘ì† ë°›ê¸°(accept), ì ‘ì† í•˜ê¸°(connect), ë°ì´í„° ë°›ê¸°(receitve), ë°ì´í„° ë³´ë‚´ê¸°(send) ë“±ë“± I/O ì´ë²¤íŠ¸ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.</u></li>
      <li>ê·¸ë˜ì„œ <code class="language-plaintext highlighter-rouge">socket</code>ê³¼ ê°™ì€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ <code class="language-plaintext highlighter-rouge">io_service</code>ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì£¼ì–´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::asio::tcp::endpoint</code> endpoint(boost::asio::ip::tcp::v4(), PORT_NUMBER);</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">endpoint</code>
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ì„¤ì •í•œë‹¤. <u>ì´ ì£¼ì†Œë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ì†í•œë‹¤.</u></li>
      <li>ì„œë²„ëŠ” <strong>IP ì£¼ì†Œ ì²´ê³„</strong> (IPv4 or IPv6)ì™€ <strong>í¬íŠ¸ ë²ˆí˜¸</strong>ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ë‘˜ì„ ì¸ìˆ˜ë¡œ ë„˜ê¸´ë‹¤.
        <ul>
          <li>í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ëŠ” <code class="language-plaintext highlighter-rouge">endpoint</code> ì„¤ì • ë°©ì‹ì´ ë‹¤ë¦„.</li>
          <li><code class="language-plaintext highlighter-rouge">v4()</code> ì—¬ê¸°ì„  IPv4 ì£¼ì†Œ ì²´ê³„ë¥¼ ì‚¬ìš©í–ˆë‹¤.</li>
          <li>ì„œë²„ ìŠ¤ìŠ¤ë¡œ ìì‹ ì˜ ì£¼ì†Œ(ip)ë¥¼ ì•Œê³  ìˆê¸° ë•Œë¬¸ì— ì„œë²„ ì‹œì‘ì„ ì¤€ë¹„í•˜ëŠ” ì•„ë˜ ê³¼ì •ì—ì„  ipë‹¤ë£¨ëŠ” ë¶€ë¶„ ì—†ë‹¤.
            <ul>
              <li>char ë°°ì—´ <code class="language-plaintext highlighter-rouge">SERVER_IP</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::asio::ip::tcp::acceptor</code> acceptor(io_service, endpoint)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">acceptor</code>
    <ul>
      <li><u>í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ì„ ë°›ì•„ë“¤ì´ëŠ” ì—­í• </u>
        <ul>
          <li>ê·¸ëŸ¬ë‹ˆ <code class="language-plaintext highlighter-rouge">io_service</code>ë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì£¼ì–´ì•¼ í•¨!</li>
          <li><code class="language-plaintext highlighter-rouge">endpoint</code>ì— ì ‘ì†ì´ ëëŠ”ì§€ë¥¼ ì•Œê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">endpoint</code>ë„ ë„˜ê¸°ê¸°</li>
        </ul>
      </li>
      <li>ì¸ìˆ˜ ğŸ‘‰ <code class="language-plaintext highlighter-rouge">io_service</code>, <code class="language-plaintext highlighter-rouge">endpoint</code></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="2ï¸âƒ£-í´ë¼ì´ì–¸íŠ¸ì˜-ì ‘ì†-ë°›ê¸°">2ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì† ë°›ê¸°</h3>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::asio::ip::tcp::socket</code> socket(io_service)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">socket</code>
    <ul>
      <li><u>ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì— í• ë‹¹</u>í•  ì†Œì¼“ì„ ë§Œë“ ë‹¤.</li>
      <li>ë§Œë“  <code class="language-plaintext highlighter-rouge">socket</code>ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤.
        <ul>
          <li>ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ê¸° ìœ„í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">io_service</code>ê°€ í•„ìš”í•˜ë¯€ë¡œ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì£¼ê¸°</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>acceptor.accept(socket);</p>
</blockquote>

<ul>
  <li>í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ë°›ì•„ë“¤ì¸ë‹¤.
    <ul>
      <li>ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì— í• ë‹¹ë  <code class="language-plaintext highlighter-rouge">socket</code>ì„ appect í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="3ï¸âƒ£-í´ë¼ì´ì–¸íŠ¸ê°€-ë³´ë‚¸-ë©”ì„¸ì§€-ë°›ê¸°--read_some">3ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë©”ì„¸ì§€ ë°›ê¸° ğŸ‘‰ read_some</h3>

<blockquote>
  <p>ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ê°€ ìˆë‹¤ë©´ ì„œë²„ë¥¼ ë¬´í•œ ë£¨í”„ <code class="language-plaintext highlighter-rouge">for(;;;)</code>ë¡œ ëŒë¦°ë‹¤.</p>
</blockquote>

<ul>
  <li>í´ë¼ì´ì–¸íŠ¸ì™€ ë©”ì„¸ì§€ ì£¼ê³  ë°›ëŠ” ê²ƒì„ ë¬´í•œ ë£¨í”„ë¡œ ëŒë¦¼.</li>
  <li>í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°ì´ ëŠì–´ì§€ê±°ë‚˜ ì—ëŸ¬ê°€ ë°œìƒí•  ë•Œë§Œ ë¬´í•œ ë£¨í”„ë¥¼ ë¹ ì ¸ë‚˜ì™€ ì„œë²„ë¥¼ ì¢…ë£Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.</li>
</ul>

<blockquote>
  <p>char buf[128] = { 0 };</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">buf</code>
    <ul>
      <li><u>í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ ë‹´ì„ ë²„í¼</u></li>
      <li>char ë°°ì—´ íƒ€ì…ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.
        <ul>
          <li>stringì´ë‚˜ vectorë¡œë„ ê°€ëŠ¥í•˜ë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::system::error_code</code> error</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">error_code</code>
    <ul>
      <li>ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ì½”ë“œë¥¼ wrappingí•œ í´ë˜ìŠ¤</li>
      <li>ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì—ëŸ¬ ì½”ë“œì™€ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>size_t <code class="language-plaintext highlighter-rouge">len</code> = socket.<u>read_some</u>(boost::asio::buffer(buf), error)</p>
</blockquote>

<ul>
  <li><u>í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„°(ë©”ì„¸ì§€) ë°›ê¸°</u>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">socket</code>ì˜ <strong>read_some</strong> í•¨ìˆ˜
        <ul>
          <li>í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ <code class="language-plaintext highlighter-rouge">boost::asio::buffer</code> íƒ€ì…ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">buf</code>ì— ë°›ëŠ”ë‹¤.</li>
          <li>ì—ëŸ¬ ì½”ë“œê°€ ë°œìƒí•  ê²ƒì„ ëŒ€ë¹„í•˜ì—¬ <code class="language-plaintext highlighter-rouge">error</code>ë„ ë„˜ê¸´ë‹¤. ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ì˜ ë©”ì„¸ì§€ë¥¼ ë°›ëŠ”ë° ì‹¤íŒ¨í•œë‹¤ë©´ <code class="language-plaintext highlighter-rouge">error</code>ì— ì—ëŸ¬ì½”ë“œê°€ ë‹´ê¸¸ ê²ƒì´ë‹¤.</li>
          <li>ì„±ê³µì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ <u>ë°›ì€ ë°ì´í„° í¬ê¸°ë¥¼ ë¦¬í„´í•œë‹¤.</u></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><u>ë™ê¸° ë°©ì‹ì´ë¯€ë¡œ ë°ì´í„°ë¥¼ ë‹¤ ë°›ì„ ë•Œê¹Œì§€ ëŒ€ê¸° ìƒíƒœì— ë“¤ì–´ê°„ë‹¤.</u></li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">eof</span><span class="p">)</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"í´ë¼ì´ì–¸íŠ¸ì™€ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" error Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ <u>ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ë¥¼ ì¡°ì‚¬</u>í•´ì•¼ í•œë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">error</code>ê°€ nullì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì€ <strong>read_some</strong> í•¨ìˆ˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ë©”ì„¸ì§€ë¥¼ ë°›ì„ ë•Œ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ ì¸ìˆ˜ë¡œ ë„˜ê²¼ë˜ <code class="language-plaintext highlighter-rouge">error</code>ì— ì—ëŸ¬ ì½”ë“œê°€ ë‹´ê²¼ë‹¤ëŠ” ëœ»</li>
    </ul>
  </li>
  <li>ì—ëŸ¬ ì½”ë“œê°€ <code class="language-plaintext highlighter-rouge">boost::asio::error::eof</code> ë¼ë©´ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì´ ëŠì–´ì¡Œë‹¤ëŠ” ëœ»</li>
  <li>ê·¸ëŸ°ê±´ ì•„ë‹ˆì§€ë§Œ ì—ëŸ¬ ì½”ë“œê°€ ì¡´ì¬í•œë‹¤ë©´ <code class="language-plaintext highlighter-rouge">error.value()</code>ì™€ <code class="language-plaintext highlighter-rouge">error.message()</code>ë¥¼ í†µí•´ ì—ëŸ¬ ê°’ê³¼ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">break</code>
    <ul>
      <li>ğŸ‘‰ ì´ë ‡ê²Œ í´ë¼ì´ì–¸íŠ¸ì˜ ë©”ì„¸ì§€ë¥¼ ë°›ëŠ” ê³¼ì • (<strong>read_some</strong>) ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ <code class="language-plaintext highlighter-rouge">error != null</code> ì´ë¼ë©´ ë¬´í•œë£¨í”„ <code class="language-plaintext highlighter-rouge">for(;;)</code>ë¥¼ ë¹ ì ¸ë‚˜ì™€ ì„œë²„ë¥¼ ì¢…ë£Œí•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="4ï¸âƒ£-í´ë¼ì´ì–¸íŠ¸ì—ê²Œ-ë©”ì„¸ì§€-ë³´ë‚´ê¸°--write_some">4ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì„¸ì§€ ë³´ë‚´ê¸° ğŸ‘‰ write_some</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ì€ ë©”ì„¸ì§€: "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">szMessage</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="p">};</span>
		<span class="n">sprintf_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"Re:%s"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="kt">int</span> <span class="n">nMsgLen</span> <span class="o">=</span> <span class="n">strnlen_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">ignored_error</span><span class="p">;</span>
		<span class="n">socket</span><span class="p">.</span><span class="n">write_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="n">nMsgLen</span><span class="p">),</span> <span class="n">ignored_error</span><span class="p">);</span>
</code></pre></div></div>

<blockquote>
  <p>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë©”ì„¸ì§€ëŠ” <code class="language-plaintext highlighter-rouge">buf</code>ì— ë‹´ê²¨ ìˆë‹¤.</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&amp;buf[0]</code>ì€ <code class="language-plaintext highlighter-rouge">buf</code>ë‚˜ ë§ˆì°¬ê°€ì§€ë‹¤. ì²« ì›ì†Œì˜ ì£¼ì†ŒëŠ” ê³§ ë°°ì—´ì˜ ì£¼ì†Œ! (=ë°°ì—´ ì´ë¦„)</li>
  <li><code class="language-plaintext highlighter-rouge">szMessage</code>
    <ul>
      <li>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚¼ ë©”ì„¸ì§€ë¥¼ ë‹´ì„ ë²„í¼</li>
      <li>char ë°°ì—´ì´ê¸°ëŠ” í•˜ì§€ë§Œ ë§ˆì°¬ê°€ì§€ë¡œ stringì´ë‚˜ vectorë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</li>
      <li>Echo ì±„íŒ… ì„œë²„ë¥¼ ë§Œë“¤ ê²ƒì´ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë©”ì„¸ì§€ë¥¼ ê·¸ëŒ€ë¡œ ëŒë ¤ ë³´ë‚´ì£¼ì.
        <ul>
          <li>â€œRe: â€œ ì™€ í•¨ê»˜ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë©”ì„¸ì§€ë¥¼ ê·¸ëŒ€ë¡œ ë³´ë‚´ì¤„ ê²ƒì„.</li>
          <li>sprintf í•¨ìˆ˜ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">szMessage</code>ì— í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚¼ ë©”ì„¸ì§€ë¥¼ ë‹´ì•˜ë‹¤.
            <ul>
              <li>â€œRe: ë¸”ë¼ë¸”ë¼â€</li>
              <li>ë§ˆì§€ë§‰ ê¸€ìëŠ” char ë°°ì—´ íŠ¹ì„±ìƒ â€˜\0â€™ì´ì–´ì•¼ í•´ì„œ 127ê¸€ìë§Œ.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">nMsgLen</code>
    <ul>
      <li>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚¼ ë©”ì„¸ì§€ì˜ ê¸¸ì´</li>
    </ul>
  </li>
  <li><strong>write_some</strong> í•¨ìˆ˜ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì„¸ì§€ <code class="language-plaintext highlighter-rouge">szMessage</code>ë¥¼ ë³´ë‚¸ë‹¤.
    <ul>
      <li>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ë‚¼ ë©”ì„¸ì§€ì¸ <code class="language-plaintext highlighter-rouge">szMessage</code>ì„ <code class="language-plaintext highlighter-rouge">boost::asio::buffer</code> íƒ€ì…ìœ¼ë¡œ ë³´ë‚¸ë‹¤.</li>
      <li>ë‹¨, ë°›ì„ ë•Œì™€ ë‹¤ë¥´ê²Œ <u>ë³´ë‚¼ ë•ŒëŠ” ë³´ë‚¼ ë°ì´í„°ì˜ ì–‘ì„ ë¯¸ë¦¬ ì§€ì •í•´ì£¼ì–´ì•¼</u> í•œë‹¤.
        <ul>
          <li>ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">nMsgLen</code>ë„ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì•¼ í•˜ë©° <code class="language-plaintext highlighter-rouge">szMessage</code>ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë³´ë‚´ì§€ ì•Šê³  <code class="language-plaintext highlighter-rouge">nMshLen</code> ê¸¸ì´ë§Œí¼ë§Œ ë³´ë‚¸ë‹¤.</li>
        </ul>
      </li>
      <li>ë§ˆì°¬ê°€ì§€ë¡œ ì´ ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ <code class="language-plaintext highlighter-rouge">ignored_error</code>ì— ì—ëŸ¬ ì½”ë“œê°€ ë‹´ê¸¸ ê²ƒì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-í´ë¼ì´ì–¸íŠ¸">ğŸ”” í´ë¼ì´ì–¸íŠ¸</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;boost/asio.hpp&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">char</span> <span class="n">SERVER_IP</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"127.0.0.1"</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PORT_NUMBER</span> <span class="o">=</span> <span class="mi">3100</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">io_service</span> <span class="n">io_service</span><span class="p">;</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="n">endpoint</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">address</span><span class="o">::</span><span class="n">from_string</span><span class="p">(</span><span class="n">SERVER_IP</span><span class="p">),</span> <span class="n">PORT_NUMBER</span><span class="p">);</span>

	<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">connect_error</span><span class="p">;</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span> <span class="n">socket</span><span class="p">(</span><span class="n">io_service</span><span class="p">);</span>
	<span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">connect_error</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">connect_error</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì—°ê²° ì‹¤íŒ¨. error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">connect_error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" , Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">connect_error</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="n">getchar</span><span class="p">();</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span>
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ì— ì—°ê²° ì„±ê³µ!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">char</span> <span class="n">szMessage</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="p">};</span>
		<span class="n">sprintf_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"%d - Send Message"</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
		<span class="kt">int</span> <span class="n">nMsgLen</span> <span class="o">=</span> <span class="n">strnlen_s</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="mi">128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">ignored_error</span><span class="p">;</span>
		<span class="n">socket</span><span class="p">.</span><span class="n">write_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">szMessage</span><span class="p">,</span> <span class="n">nMsgLen</span><span class="p">),</span> <span class="n">ignored_error</span><span class="p">);</span>

		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ì— ë³´ë‚¸ ë©”ì„¸ì§€ : "</span> <span class="o">&lt;&lt;</span> <span class="n">szMessage</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

		<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">error</span><span class="p">;</span>
		<span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">read_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">eof</span><span class="p">)</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ì™€ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" error Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">message</span><span class="p">().</span><span class="n">c_str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ë¡œë¶€í„° ë°›ì€ ë©”ì„¸ì§€ : "</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span>
		<span class="n">socket</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

	<span class="n">getchar</span><span class="p">();</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ì„œë²„ë‘ ë©”ì„¸ì§€ ì£¼ê³  ë°›ëŠ” ê²ƒì„ 7 ë²ˆë§Œ í•˜ê³  ì„œë²„ë‘ ì—°ê²° ëŠì„ê±°ë¼ì„œ 7 ë²ˆ ë„ëŠ” forë¬¸ ì˜ˆì œ !</li>
</ul>

<h3 id="1ï¸âƒ£-ì„œë²„ì—-ì ‘ì†í•˜ê¸°">1ï¸âƒ£ ì„œë²„ì— ì ‘ì†í•˜ê¸°</h3>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">boost::asio::tcp::endpoint</code> endpoint(boost::asio::ip::address::from_string(SERVER_IP), PORT_NUMBER);</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">endpoint</code>
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ì„¤ì •í•œë‹¤. <u>ì ‘ì†í•  ì„œë²„ì˜ IP ì£¼ì†Œë¥¼ ì§€ì •í•œë‹¤.</u></li>
      <li><u>ì„œë²„ì—ì„œì˜ endpoint ì„¤ì •ê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤</u>
        <ul>
          <li>ì„œë²„ì˜ <code class="language-plaintext highlighter-rouge">endpoint</code> ì„¤ì •ê³¼ ë¹„êµ ğŸ‘‰ ì„œë²„ëŠ” <strong>Ipv4 ì£¼ì†Œ ì²´ê³„</strong>ë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê¸°ê³  ìˆë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” <strong>ì„œë²„ ì£¼ì†Œ</strong>ë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê¹€
            <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="nf">endpoint</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">v4</span><span class="p">(),</span> <span class="n">PORT_NUMBER</span><span class="p">);</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li><strong>boost::asio::ip::address::from_string</strong> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ ëœ ì„œë²„ IP ì£¼ì†Œë¥¼ Boost.Asioì—ì„œ ì‚¬ìš©í•˜ëŠ” IP ì£¼ì†Œë¡œ ë³€í™˜í•´ì£¼ì–´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">connect_error</span><span class="p">;</span>
	<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span> <span class="nf">socket</span><span class="p">(</span><span class="n">io_service</span><span class="p">);</span>
	<span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">connect_error</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">connect_error</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì—°ê²° ì‹¤íŒ¨. error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">connect_error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" , Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">connect_error</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="n">getchar</span><span class="p">();</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span>
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ì— ì—°ê²° ì„±ê³µ!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>socket.connect(endpoint, connect_error);</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">socket</code>ì— í´ë¼ì´ì–¸íŠ¸ì¸ ìê¸° ìì‹ ì„ í• ë‹¹í•˜ê¸°
    <ul>
      <li><strong>connect</strong> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„(<code class="language-plaintext highlighter-rouge">endpoint</code>ì— ì„œë²„ ì£¼ì†Œì™€ í¬íŠ¸ ë„˜ë²„ë¥¼ ì§€ì •í–ˆì—ˆë‹¤.)ì— ì ‘ì†ì„ ì‹œë„í•œë‹¤.
        <ul>
          <li>ì‹¤íŒ¨í•˜ë©´ <code class="language-plaintext highlighter-rouge">connect_error</code>ì— ì—ëŸ¬ ì½”ë“œê°€ ë‹´ê¸´ë‹¤.</li>
          <li>ë™ê¸° ë°©ì‹ì´ë¯€ë¡œ ì ‘ì†ì´ ì„±ê³µí•˜ê±°ë‚˜ ì‹¤íŒ¨í•  ë•Œê¹Œì§€ ëŒ€ê¸° ìƒíƒœê°€ ëœë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="2ï¸âƒ£-ì„œë²„ì—ê²Œ-ë©”ì„¸ì§€-ë³´ë‚´ê¸°--write_some">2ï¸âƒ£ ì„œë²„ì—ê²Œ ë©”ì„¸ì§€ ë³´ë‚´ê¸° ğŸ‘‰ write_some</h3>

<pre><code class="language-CPP">		char szMessage[128] = { 0, };
		sprintf_s(szMessage, 128 - 1, "%d - Send Message", i);
		int nMsgLen = strnlen_s(szMessage, 128 - 1);

		boost::system::error_code ignored_error;
		socket.write_some(boost::asio::buffer(szMessage, nMsgLen), ignored_error);

		cout &lt;&lt; "ì„œë²„ì— ë³´ë‚¸ ë©”ì„¸ì§€ : " &lt;&lt; szMessage &lt;&lt; endl;
</code></pre>

<p><br /></p>

<h3 id="3ï¸âƒ£-ì„œë²„ê°€-ë³´ë‚¸-ë©”ì„¸ì§€-ë°›ê¸°--read_some">3ï¸âƒ£ ì„œë²„ê°€ ë³´ë‚¸ ë©”ì„¸ì§€ ë°›ê¸° ğŸ‘‰ read_some</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
		<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">error</span><span class="p">;</span>
		<span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">read_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">error</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">eof</span><span class="p">)</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ì„œë²„ì™€ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"error No: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" error Message: "</span> <span class="o">&lt;&lt;</span> <span class="n">error</span><span class="p">.</span><span class="n">message</span><span class="p">().</span><span class="n">c_str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>read_some</strong> ê³¼ì •ì—ì„œ <code class="language-plaintext highlighter-rouge">error</code> ì²´í¬</li>
</ul>

<p><br /></p>

<h3 id="4ï¸âƒ£-ì„œë²„ë‘-ì ‘ì†-ëŠê¸°">4ï¸âƒ£ ì„œë²„ë‘ ì ‘ì† ëŠê¸°</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">if</span> <span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span>  <span class="c1">// ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœì¼ ë•Œ</span>
		<span class="n">socket</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>  <span class="c1">// ì„œë²„ì™€ì˜ ì—°ê²°ì„ ëŠëŠ”ë‹¤. </span>
</code></pre></div></div>

<ul>
  <li>forë¬¸ì„ 7 ë²ˆ ëŒë©´ì„œ ì„œë²„ë‘ ë©”ì„¸ì§€ë¥¼ 7 ë²ˆ ì£¼ê³  ë°›ì€ í›„ forë¬¸ì„ ë¹ ì ¸ë‚˜ì˜¤ë©´ ì´ì œ ì„œë²„ë‘ ì ‘ì†ì„ ëŠì–´ì•¼ í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">socket.is_open()</code>
    <ul>
      <li>ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ìƒíƒœë¼ë©´ trueë¥¼ ë¦¬í„´í•˜ê³  ì—°ê²°ë˜ì§€ ì•Šì€ ìƒíƒœë¼ë©´ falseë¥¼ ë¦¬í„´í•œë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">socket.close()</code>
    <ul>
      <li><u>ì„œë²„ì™€ì˜ ì—°ê²°ì„ ëŠëŠ”ë‹¤.</u></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-ì „ë°˜ì ì¸-íë¦„--ì„œë²„-í´ë¼ì´ì–¸íŠ¸">ğŸ”” ì „ë°˜ì ì¸ íë¦„ : ì„œë²„-í´ë¼ì´ì–¸íŠ¸</h2>

<p><img src="https://user-images.githubusercontent.com/42318591/91835247-1af01000-ec84-11ea-8be3-b3ce91f8abf2.png" alt="image" width="70%" height="70%" class="align-center" /></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>ì„œë²„</strong></th>
      <th style="text-align: center"><strong>í´ë¼ì´ì–¸íŠ¸</strong></th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1ï¸âƒ£ <code class="language-plaintext highlighter-rouge">io_service</code> ìƒì„± <br /> boost::asio::io_service <code class="language-plaintext highlighter-rouge">io_service</code>;</td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">2ï¸âƒ£ ì ‘ì† ë°›ì„ ì¤€ë¹„ <br /> boost::asio::ip::tcp::endpoint <code class="language-plaintext highlighter-rouge">endpoint</code>(..) <br /> boost::asio::ip::tcp::acceptor <code class="language-plaintext highlighter-rouge">acceptor</code>(..)</td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">3ï¸âƒ£ <code class="language-plaintext highlighter-rouge">io_service</code> ìƒì„± <br /> boost::asio::io_service <code class="language-plaintext highlighter-rouge">io_service</code>;</td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">4ï¸âƒ£ ì„œë²„ì— ì ‘ì†í•˜ê¸° <br /> boost::asio::ip::tcp::endpoint <code class="language-plaintext highlighter-rouge">endpoint</code>(..) <br /> boost::asio::ip::tcp::socket <code class="language-plaintext highlighter-rouge">socket</code>(io_service); <br /> <code class="language-plaintext highlighter-rouge">socket.connect</code>(endpoint, connect_error);</td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">5ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì† ë°›ì•„ë“¤ì´ê¸° <br /> boost::asio::ip::tcp::socket <code class="language-plaintext highlighter-rouge">socket</code>(io_service); <br /> <code class="language-plaintext highlighter-rouge">acceptor.accept</code>(socket);</td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">6ï¸âƒ£ ì„œë²„ì—ê²Œ ë©”ì„¸ì§€ ë³´ë‚´ê¸° <br /> socket.write_some(â€¦)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">7ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë©”ì„¸ì§€ ë°›ê¸° <br /> socket.read_some(â€¦)</td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">8ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì„¸ì§€ ë³´ë‚´ê¸° <br /> socket.write_some(â€¦)</td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">9ï¸âƒ£ ì„œë²„ë¡œë¶€í„° ë©”ì„¸ì§€ ë°›ê¸° <br /> socket.read_some(â€¦)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">1ï¸âƒ£0ï¸âƒ£ ì„œë²„ì™€ ì ‘ì† ëŠê¸° <br /> socket.close()</td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: center">1ï¸âƒ£1ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë©”ì„¸ì§€ ë°›ê¸° <br /> socket.read_some(â€¦) <br /> í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ë©”ì„¸ì§€ë¥¼ ë°›ëŠ” ê³¼ì •ì—ì„œ <br /> <u>í´ë¼ì´ì–¸íŠ¸ì™€ ì ‘ì†ì´ ëŠê²¨ `error`ì— ì—ëŸ¬ì½”ë“œê°€ ë‹´ê¸°ê³  ë¬´í•œë£¨í”„ë¥¼ break í•˜ì—¬ ì„œë²„ë„ ì¢…ë£Œëœë‹¤</u></td>
      <td style="text-align: center">Â </td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h2 id="-ê´€ë ¨-boostasio-api">ğŸ”” ê´€ë ¨ Boost.Asio API</h2>

<h3 id="endpoint-í´ë˜ìŠ¤">endpoint í´ë˜ìŠ¤</h3>

<blockquote>
  <p>boost::asio::ip::tcp::<u>endpoint</u></p>
</blockquote>

<ul>
  <li>í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©í•  <u>ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ</u>ë¥¼ ì„¤ì •í•œë‹¤.</li>
  <li>ìƒì„±ì ì¢…ë¥˜
    <ul>
      <li>1ï¸âƒ£ ì¸ìˆ˜ ì—†ëŠ”
        <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="nf">endpoint</span><span class="p">();</span>
</code></pre></div>        </div>
      </li>
      <li>2ï¸âƒ£ ì¸ìˆ˜ 2 ê°œ ğŸ‘‰ ì£¼ì†Œ ì²´ê³„(í”„ë¡œí† ì½œ) + í¬íŠ¸ ë²ˆí˜¸
        <ul>
          <li>ì„œë²„ê°€ ì´ ìƒì„±ìë¥¼ ì‚¬ìš©í–ˆë‹¤. ì„œë²„ëŠ” ìŠ¤ìŠ¤ë¡œ ìì‹ ì˜ IP ì£¼ì†Œë¥¼ ì•Œê³ ìˆê¸° ë•Œë¬¸ì— IP ì£¼ì†ŒëŠ” ì¸ìˆ˜ë¡œ ë„˜ê¸¸ í•„ìš” ì—†ì´ ì£¼ì†Œ ì²´ê³„ë§Œ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.
            <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="nf">endpoint</span><span class="p">(</span><span class="n">tcp</span><span class="o">::</span><span class="n">v4</span><span class="p">(),</span> <span class="mi">14567</span><span class="p">);</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>3ï¸âƒ£ ì¸ìˆ˜ 2 ê°œ ğŸ‘‰ ì„œë²„ ì£¼ì†Œ + í¬íŠ¸ ë²ˆí˜¸
        <ul>
          <li>í´ë¼ì´ì–¸íŠ¸ê°€ ì´ ìƒì„±ìë¥¼ ì‚¬ìš©í–ˆë‹¤. ì ‘ì†í•  ì„œë²„ ì£¼ì†Œê°€ í•„ìš”í•˜ë‹¤.
            <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="nf">endpoint</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">address</span><span class="o">::</span><span class="n">from_sttring</span><span class="p">(</span><span class="s">"127.0.0.1"</span><span class="p">),</span> <span class="mi">14567</span><span class="p">);</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>4ï¸âƒ£ ì¸ìˆ˜ 1 ê°œ ğŸ‘‰ ë‹¤ë¥¸ endpoint ë¡œ ë³µì‚¬ ìƒì„±
        <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="nf">endpoint_2</span><span class="p">(</span><span class="n">endpoint</span><span class="p">);</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="acceptor-í´ë˜ìŠ¤">acceptor í´ë˜ìŠ¤</h3>

<blockquote>
  <p>boost::asio::ip::tcp::<u>acceptor</u></p>
</blockquote>

<ul>
  <li><u>í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ë°›ì•„ë“¤ì´ê¸°</u> ìœ„í•œ í´ë˜ìŠ¤</li>
  <li>ìƒì„±ì ë²„ì „ì€ 5 ê°€ì§€ê°€ ìˆëŠ”ë° ì±… ì°¸ê³ 
    <ul>
      <li>ì ‘ì†ì„ ë°›ì•„ë“¤ì¼ ì£¼ì†Œì™€ ë§Œì•½ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì—ì„œ ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì£¼ì†Œë¼ë©´ ì¬ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ì¸ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<h4 id="accept-í•¨ìˆ˜">accept í•¨ìˆ˜</h4>

<blockquote>
  <p>acceptor.accept(socket)</p>
</blockquote>

<ul>
  <li><u>í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ë°›ì•„ë“¤ì¸ë‹¤</u>
    <ul>
      <li>ì—°ê²° ìš”ì²­ì´ ìˆì„ ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.</li>
    </ul>
  </li>
  <li>ì¸ìˆ˜ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ í• ë‹¹ ë˜ì–´ ìˆëŠ” ì†Œì¼“ì„ ë„˜ê¸´ë‹¤. ì—ëŸ¬ì½”ë“œë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.</li>
</ul>

<p><br /></p>

<h3 id="socket-í´ë˜ìŠ¤">socket í´ë˜ìŠ¤</h3>

<blockquote>
  <p>boost::asio::ip::tcp::<u>socket</u></p>
</blockquote>

<h4 id="connect-í•¨ìˆ˜">connect í•¨ìˆ˜</h4>

<blockquote>
  <p>socket.connect(endpoint)</p>
</blockquote>

<ul>
  <li><u>ì„œë²„ì™€ì˜ ì ‘ì† ìš”ì²­</u>
    <ul>
      <li>ì ‘ì† ë  ë•Œê¹Œì§€ ë” ì§„í–‰í•˜ì§€ ì•Šê³  ê¸°ë‹¤ë¦°ë‹¤.</li>
    </ul>
  </li>
  <li>ì„œë²„ ì£¼ì†Œì¸ <code class="language-plaintext highlighter-rouge">endpoint</code>ë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê¸´ë‹¤. ì—ëŸ¬ ì½”ë“œë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.</li>
</ul>

<h4 id="read_some-í•¨ìˆ˜">read_some í•¨ìˆ˜</h4>

<blockquote>
  <p>socket.read_some(buffer, errorcode)</p>
</blockquote>

<ul>
  <li><u>ì—°ê²°ëœ ê³³ì—ì„œ ë³´ë‚´ëŠ” ë°ì´í„°ë¥¼ ë°›ìœ¼ë©°</u> ì´ë¥¼ bufferì— ë‹´ëŠ”ë‹¤.</li>
  <li>ë°ì´í„°ë¥¼ ë°›ì„ ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.</li>
  <li>ì—ëŸ¬ì½”ë“œë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.
    <ul>
      <li>ì—°ê²°ì´ ëŠì–´ì¡Œë‹¤ë©´ ì—ëŸ¬ì½”ë“œëŠ” <code class="language-plaintext highlighter-rouge">boost::asio::error::eof</code> ì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<h4 id="write_some-í•¨ìˆ˜">write_some í•¨ìˆ˜</h4>

<blockquote>
  <p>socket.write_some(buffer, errorcode)</p>
</blockquote>

<ul>
  <li><u>ì—°ê²°ëœ ê³³ì— ë°ì´í„°ë¥¼ ë³´ë‚´ë©°</u> ì´ë¥¼ bufferë¡œ ë³´ë‚¸ë‹¤.</li>
  <li>ë°ì´í„°ë¥¼ ë‹¤ ë³´ë‚¼ ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.</li>
  <li>ì—ëŸ¬ì½”ë“œë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ë„ ìˆë‹¤.</li>
</ul>

<h4 id="close-í•¨ìˆ˜">close í•¨ìˆ˜</h4>

<blockquote>
  <p>socket.close() í˜¹ì€ socket.close(ec)</p>
</blockquote>

<ul>
  <li><u>ì—°ê²°ëœ ê³³ê³¼ì˜ ì ‘ì†ì„ ëŠëŠ”ë‹¤</u></li>
  <li>ì¸ìˆ˜ë¥¼ ì•„ë¬´ê²ƒë„ ë„˜ê¸°ì§€ ì•Šì€ ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.</li>
  <li>ì—ëŸ¬ì½”ë“œë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì§„ ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì´ê³³ì— ì–´ë–¤ ì—ëŸ¬ì¸ì§€ì— ëŒ€í•œ ë‚´ìš©ì´ ë‹´ê¸´ë‹¤.</li>
</ul>

<p><br /></p>

<h2 id="-ë‹¤ë¥¸-ì½”ë“œì™€-ë¹„êµ">ğŸ”” ë‹¤ë¥¸ ì½”ë“œì™€ ë¹„êµ</h2>

<blockquote>
  <p><a href="https://ansohxxn.github.io/cpp%20network/tcpip/">ë”°ë¼ì„œ ë°°ìš°ëŠ” C++ ê°•ì˜ì—ì„œ í•„ê¸°í•œ ì½”ë“œ</a>ì´ë‹¤.</p>
</blockquote>

<ul>
  <li>try-catch ë¬¸ì„ ì‚¬ìš©í•˜ë©° ì—°ê²° ì—ëŸ¬ëŠ” <code class="language-plaintext highlighter-rouge">accept</code>ì—ì„œ ë°›ê³  ìˆë‹¤. ì´ <code class="language-plaintext highlighter-rouge">accept</code> ê³¼ì •ë„ ë¬´í•œ ë£¨í”„ ì•ˆì—ì„œ ì´ë£¨ì–´ì§.</li>
  <li>â­ ì´ ì½”ë“œì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">socket</code> ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  <u>ì†Œì¼“ ìœ„ì— iostreamì„ êµ¬í˜„í•œ</u> <code class="language-plaintext highlighter-rouge">boost::asio::ip::tcp::iostream</code>ì„ ì‚¬ìš©í•œë‹¤.
    <ul>
      <li>Boost.Asio ì—ì„œ ì˜¤ë²„ë¡œë”©ëœ <code class="language-plaintext highlighter-rouge">iostream</code>ì´ë‹¤.</li>
      <li>boost::asio::ip::tcp::<code class="language-plaintext highlighter-rouge">iostream</code> <strong>stream</strong>;
        <ul>
          <li>ìœ„ ì½”ë“œì™€ ë¹„êµ) boost::asio::ip::tcp::socket socket(io_service);</li>
        </ul>
      </li>
      <li>í´ë¼ì´ì–¸íŠ¸ ì ‘ì† ë°›ê¸°
        <ul>
          <li>acceptor.accept(*stream.rdbuf(), ec);
            <ul>
              <li>ìœ„ ì½”ë“œì™€ ë¹„êµ) acceptor.accept(socket);</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ë©”ì„¸ì§€ ë°›ê¸°
        <ul>
          <li>socket.<strong>read_some</strong>(boost::asio::buffer(buf), error);
            <ul>
              <li>ìœ„ ì½”ë“œì™€ ë¹„êµ) <strong>std::getline</strong>(stream, line);</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ë©”ì„¸ì§€ ë³´ë‚´ê¸°
        <ul>
          <li>socket.<strong>write_some</strong>(boost::asio::buffer(szMessage, nMsgLen), ignored_error);
            <ul>
              <li>ìœ„ ì½”ë“œì™€ ë¹„êµ) <strong>std::cout</strong> Â«Â line Â«Â std::endl;</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì„œë²„">ì„œë²„</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;	
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;boost/asio.hpp&gt;
</span>
<span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">try</span>
	<span class="p">{</span>
		<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">io_service</span> <span class="n">io_service</span><span class="p">;</span>

		<span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span> <span class="n">endpoint</span><span class="p">(</span><span class="n">tcp</span><span class="o">::</span><span class="n">v4</span><span class="p">(),</span> <span class="mi">13</span><span class="p">);</span>			<span class="c1">// í†µì‹ ì„ í•˜ëŠ” ì–‘ ëì  endpoint. 13ì€ port # ì„ì˜ì˜ ìˆ«ì ê°€ëŠ¥</span>
		<span class="n">tcp</span><span class="o">::</span><span class="n">acceptor</span> <span class="n">acceptor</span><span class="p">(</span><span class="n">io_service</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">);</span>	<span class="c1">// endpointì—ì„œ io_serviceë¥¼ acceptí•  acceptorë¥¼ ìƒì„±</span>

		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Server started"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(;;)</span>	<span class="c1">// ë¬´í•œ ë£¨í”„</span>
		<span class="p">{</span>
			<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">message_to_send</span> <span class="o">=</span> <span class="s">"Hello From Server"</span><span class="p">;</span>

			<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">iostream</span> <span class="n">stream</span><span class="p">;</span>	<span class="c1">// ì¼ë°˜ iostreamì´ ì•„ë‹ˆë¼ ì˜¤ë²„ë¡œë“œëœ tcp::iostreamì´ë‹¤.</span>

			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"check 1"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>	<span class="c1">// ë„¤íŠ¸ì›Œí‚¹ì—ì„œë„ coutì„ ì“¸ ìˆ˜ ìˆë‹¤.</span>

			<span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">ec</span><span class="p">;</span>
			<span class="n">acceptor</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="o">*</span><span class="n">stream</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">(),</span> <span class="n">ec</span><span class="p">);</span>	<span class="c1">// í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ì„ ë°›ì•„ë“¤ì¸ë‹¤.</span>

			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"check 2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ec</span><span class="p">)</span>	<span class="c1">//TODO: How to take care of multiple clients? Multi-threading?</span>
			<span class="p">{</span>	<span class="c1">// í´ë¼ì´ì–¸íŠ¸ê°€ ì œëŒ€ë¡œ ì ‘ì†ì´ ëë‹¤ë©´,</span>

				<span class="c1">// receive message from client </span>
				<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">line</span><span class="p">;</span>
				<span class="n">std</span><span class="o">::</span><span class="n">getline</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">line</span><span class="p">);</span>			<span class="c1">// ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë©”ì„¸ì§€ë¥¼ ë°›ëŠ”ë‹¤.</span>
				<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">line</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>		<span class="c1">// í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œëŠ” ì—¬ê¸°ì„œ ë°ì´í„°ë¥¼ ë³´ë‚´ì•¼ ì„œë²„ê°€ ë°›ëŠ”ë‹¤.</span>

				<span class="c1">// send message to client</span>
				<span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="n">message_to_send</span><span class="p">;</span>
				<span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>				<span class="c1">// í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œëŠ” ì—¬ê¸°ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ ì„œë²„ê°€ ë³´ë‚¸ë‹¤.</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">catch</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>						<span class="c1">// ì˜ˆì™¸ ë°œìƒì‹œ</span>
	<span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="í´ë¼ì´ì–¸íŠ¸">í´ë¼ì´ì–¸íŠ¸</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;	
#include &lt;boost/asio.hpp&gt;
</span>
<span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">try</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Usage : Client &lt;host&gt;</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
			<span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
		<span class="p">}</span>
		
		<span class="n">tcp</span><span class="o">::</span><span class="n">iostream</span> <span class="n">stream</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="mi">13</span><span class="p">)));</span> <span class="c1">// port num = 13</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stream</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No address. Unable to connect: "</span> <span class="o">&lt;&lt;</span> <span class="n">stream</span><span class="p">.</span><span class="n">error</span><span class="p">().</span><span class="n">message</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
			<span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">// send message to server</span>
		<span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="s">"Hello from client"</span><span class="p">;</span>
		<span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

		<span class="c1">// receive message from server</span>
		<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">line</span><span class="p">;</span>
		<span class="n">std</span><span class="o">::</span><span class="n">getline</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">line</span><span class="p">);</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">line</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">catch</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span> <span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°</a></p>
:ET